<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rolai - Criador de Personagens Aprimorado</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="radiation-symbol">‚ò¢</span> Rolai - Criador de Personagens <span class="radiation-symbol">‚ò¢</span></h1>
            <div class="subtitle">Ecos da Terra Queimada ‚Ä¢ Call of Cthulhu 2053 ‚Ä¢ Sistema F√≠sico Detalhado</div>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('info')">üß¨ Info Detalhada</button>
            <button class="tab-button" onclick="showTab('attributes')">üí™ Atributos</button>
            <button class="tab-button" onclick="showTab('skills')">üéØ Per√≠cias</button>
            <button class="tab-button" onclick="showTab('comfyui')">üé® ComfyUI</button>
            <button class="tab-button" onclick="showTab('sheet')">üìÑ Ficha Final</button>
        </div>

        <div id="info" class="tab-content active">
            <div class="info-box">
                <h3>üåø Bem-vindo a Itatiaia, 2053</h3>
                <p>A Terceira Guerra Mundial varreu as grandes cidades do mundo. Mas aqui, nas montanhas entre Rio e S√£o Paulo, a vida continua, de certa forma. Itatiaia e outras pequenas cidades remotas sobreviveram - longe demais dos alvos estrat√©gicos, protegidas pela geografia, esquecidas pela guerra. Nos √∫ltimos anos, reconstru√≠mos uma vida quase normal. Temos eletricidade da velha hidrel√©trica, cultivamos nossa comida, e at√© restabelecemos contato com outros bols√µes de sobreviventes. Para nossos filhos, este √© o √∫nico mundo que conhecem - seguro, pequeno, mas nosso. S√≥ que ultimamente, exploradores t√™m encontrado coisas estranhas nas ru√≠nas das metr√≥poles mortas. E alguns juram que a destrui√ß√£o despertou algo que deveria ter permanecido adormecido.</p>
            </div>

            <!-- Basic Character Info -->
            <div class="section">
                <h2>üé≠ Informa√ß√µes B√°sicas do Investigador</h2>
                
                <div class="form-group">
                    <label for="characterName">Nome do Investigador:</label>
                    <input type="text" id="characterName" placeholder="Ex: Dr. Marcus 'Sucata' Silva" onchange="updateCharacterData()">
                </div>

                <div class="form-group">
                    <label for="characterAge">Idade:</label>
                    <input type="number" id="characterAge" min="15" max="90" placeholder="15-90 anos" onchange="updateCharacterData()">
                </div>

                <div class="form-group">
                    <label for="occupationSelect">Ocupa√ß√£o no Mundo Devastado:</label>
                    <select id="occupationSelect" onchange="updateOccupationInfo()">
                        <option value="">Selecione uma ocupa√ß√£o...</option>
                        <option value="scavenger">Sucateiro - Encontra tesouros nos escombros</option>
                        <option value="mechanic">Mec√¢nico - Mant√©m m√°quinas funcionando</option>
                        <option value="medic">M√©dico de Campo - Cura sem recursos</option>
                        <option value="trader">Comerciante - Negocia entre assentamentos</option>
                        <option value="guard">Guarda - Protege os fracos</option>
                        <option value="scout">Explorador - Desbrava o desconhecido</option>
                        <option value="cultist">Cultista - Conhece segredos proibidos</option>
                        <option value="mutant_hunter">Ca√ßador de Mutantes - Elimina aberra√ß√µes</option>
                        <option value="scholar">Acad√™mico - Preserva o conhecimento antigo</option>
                        <option value="custom">‚úèÔ∏è Criar Ocupa√ß√£o Personalizada</option>
                    </select>
                </div>

                <div id="occupationInfo"></div>

                <div class="custom-occupation" id="customOccupationGroup">
                    <div class="form-group">
                        <label for="customOccupationName">Nome da Ocupa√ß√£o:</label>
                        <input type="text" id="customOccupationName" placeholder="Ex: Xam√£ Tecnol√≥gico" onchange="updateCharacterData()">
                    </div>
                    
                    <div class="form-group">
                        <label for="customOccupationDesc">Descri√ß√£o:</label>
                        <textarea id="customOccupationDesc" placeholder="Descreva o papel desta ocupa√ß√£o no mundo devastado..." onchange="updateCharacterData()"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="characterBackground">Hist√≥ria de Sobreviv√™ncia:</label>
                    <textarea id="characterBackground" placeholder="Como voc√™ sobreviveu √† guerra? O que perdeu? O que ainda busca neste mundo morto? Quais s√£o suas motiva√ß√µes e objetivos?" onchange="updateCharacterData()"></textarea>
                </div>
            </div>

            <!-- Enhanced Physical Characteristics -->
            <div class="physical-characteristics">
                <h2>üß¨ Caracter√≠sticas F√≠sicas Detalhadas</h2>
                
                <div class="characteristics-grid">
                    <!-- Basic Demographics -->
                    <div class="characteristic-group">
                        <h3>üë§ Demografia B√°sica</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="characterGender">G√™nero:</label>
                                <select id="characterGender" onchange="updatePhysical('gender', this.value)">
                                    <option value="person">Neutro/Pessoa</option>
                                    <option value="female">Feminino</option>
                                    <option value="male">Masculino</option>
                                    <option value="non-binary">N√£o-bin√°rio</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="characterEthnicity">Etnia:</label>
                                <select id="characterEthnicity" onchange="updatePhysical('ethnicity', this.value)">
                                    <option value="mixed">Mista</option>
                                    <option value="latino">Latino</option>
                                    <option value="caucasian">Caucasiana</option>
                                    <option value="african">Africana</option>
                                    <option value="asian">Asi√°tica</option>
                                    <option value="indigenous">Ind√≠gena</option>
                                    <option value="other">Outra</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="characterSkinTone">Tom de Pele:</label>
                                <select id="characterSkinTone" onchange="updatePhysical('skinTone', this.value)">
                                    <option value="medium">M√©dio</option>
                                    <option value="light">Claro</option>
                                    <option value="tan">Bronzeado</option>
                                    <option value="dark">Escuro</option>
                                    <option value="very_light">Muito Claro</option>
                                    <option value="very_dark">Muito Escuro</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="characterEyeColor">Cor dos Olhos:</label>
                                <select id="characterEyeColor" onchange="updatePhysical('eyeColor', this.value)">
                                    <option value="brown">Castanho</option>
                                    <option value="blue">Azul</option>
                                    <option value="green">Verde</option>
                                    <option value="hazel">Avel√£</option>
                                    <option value="amber">√Çmbar</option>
                                    <option value="gray">Cinza</option>
                                    <option value="heterochromia">Heterocromia</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Facial Features -->
                    <div class="characteristic-group">
                        <h3>üëÅÔ∏è Caracter√≠sticas Faciais</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="characterHairColor">Cor do Cabelo:</label>
                                <select id="characterHairColor" onchange="updatePhysical('hairColor', this.value)">
                                    <option value="dark_brown">Castanho Escuro</option>
                                    <option value="black">Preto</option>
                                    <option value="brown">Castanho</option>
                                    <option value="light_brown">Castanho Claro</option>
                                    <option value="blonde">Loiro</option>
                                    <option value="red">Ruivo</option>
                                    <option value="gray">Grisalho</option>
                                    <option value="white">Branco</option>
                                    <option value="dyed">Colorido</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="characterHairStyle">Estilo do Cabelo:</label>
                                <select id="characterHairStyle" onchange="updatePhysical('hairStyle', this.value)">
                                    <option value="short">Curto</option>
                                    <option value="medium">M√©dio</option>
                                    <option value="long">Longo</option>
                                    <option value="bald">Careca</option>
                                    <option value="buzzcut">Raspado</option>
                                    <option value="ponytail">Rabo de Cavalo</option>
                                    <option value="braided">Tran√ßado</option>
                                    <option value="messy">Bagun√ßado</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="facialExpression">Express√£o:</label>
                                <select id="facialExpression" onchange="updatePhysical('facialExpression', this.value)">
                                    <option value="determined">Determinada</option>
                                    <option value="calm">Calma</option>
                                    <option value="alert">Alerta</option>
                                    <option value="worried">Preocupada</option>
                                    <option value="confident">Confiante</option>
                                    <option value="suspicious">Desconfiada</option>
                                    <option value="tired">Cansada</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="characterPosture">Postura:</label>
                                <select id="characterPosture" onchange="updatePhysical('posture', this.value)">
                                    <option value="confident">Confiante</option>
                                    <option value="alert">Alerta</option>
                                    <option value="relaxed">Relaxada</option>
                                    <option value="nervous">Nervosa</option>
                                    <option value="aggressive">Agressiva</option>
                                    <option value="cautious">Cautelosa</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Body Characteristics -->
                    <div class="characteristic-group">
                        <h3>üèÉ‚Äç‚ôÇÔ∏è F√≠sico e Estatura</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bodyType">Tipo Corporal:</label>
                                <select id="bodyType" onchange="updatePhysical('bodyType', this.value)">
                                    <option value="average">M√©dio</option>
                                    <option value="thin">Magro</option>
                                    <option value="lean">Esbelto</option>
                                    <option value="athletic">Atl√©tico</option>
                                    <option value="stocky">Robusto</option>
                                    <option value="heavy">Pesado</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="characterHeight">Altura:</label>
                                <select id="characterHeight" onchange="updatePhysical('height', this.value)">
                                    <option value="average">M√©dia</option>
                                    <option value="short">Baixo</option>
                                    <option value="tall">Alto</option>
                                    <option value="very_short">Muito Baixo</option>
                                    <option value="very_tall">Muito Alto</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="clothingStyle">Estilo de Roupa:</label>
                            <select id="clothingStyle" onchange="updatePhysical('clothingStyle', this.value)">
                                <option value="practical">Pr√°tica</option>
                                <option value="military">Militar</option>
                                <option value="scavenged">Recuperada</option>
                                <option value="well_maintained">Bem Cuidada</option>
                                <option value="ragged">Esfarrapada</option>
                                <option value="formal">Formal</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Prosthetics and Augmentations -->
                <div class="modification-section">
                    <h4>ü¶æ Pr√≥teses e Augmenta√ß√µes</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="prosthetics-enabled" onchange="toggleProsthetics(this.checked)">
                                Possui Pr√≥teses
                            </label>
                            
                            <div id="prosthetics-options" style="display: none; margin-top: 10px;">
                                <label>Membros Prot√©ticos:</label>
                                <div class="checkbox-grid">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-left-arm" onchange="updateProstheticLimb('left_arm', this.checked)">
                                        <label for="prosthetic-left-arm">Bra√ßo Esquerdo</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-right-arm" onchange="updateProstheticLimb('right_arm', this.checked)">
                                        <label for="prosthetic-right-arm">Bra√ßo Direito</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-left-leg" onchange="updateProstheticLimb('left_leg', this.checked)">
                                        <label for="prosthetic-left-leg">Perna Esquerda</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-right-leg" onchange="updateProstheticLimb('right_leg', this.checked)">
                                        <label for="prosthetic-right-leg">Perna Direita</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-left-hand" onchange="updateProstheticLimb('left_hand', this.checked)">
                                        <label for="prosthetic-left-hand">M√£o Esquerda</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="prosthetic-right-hand" onchange="updateProstheticLimb('right_hand', this.checked)">
                                        <label for="prosthetic-right-hand">M√£o Direita</label>
                                    </div>
                                </div>
                                
                                <div class="form-row" style="margin-top: 10px;">
                                    <div class="form-group">
                                        <label for="prosthetic-type">Tipo:</label>
                                        <select id="prosthetic-type" onchange="updateProstheticType(this.value)">
                                            <option value="mechanical">Mec√¢nica</option>
                                            <option value="bio_tech">Bio-Tech</option>
                                            <option value="crude">Improvisada</option>
                                            <option value="advanced">Avan√ßada</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="prosthetic-quality">Qualidade:</label>
                                        <select id="prosthetic-quality" onchange="updateProstheticQuality(this.value)">
                                            <option value="functional">Funcional</option>
                                            <option value="crude">Tosca</option>
                                            <option value="advanced">Avan√ßada</option>
                                            <option value="military_grade">Grau Militar</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="augmentations-enabled" onchange="toggleAugmentations(this.checked)">
                                Possui Augmenta√ß√µes
                            </label>
                            
                            <div id="augmentations-options" style="display: none; margin-top: 10px;">
                                <label>Tipos de Augmenta√ß√£o:</label>
                                <div class="checkbox-grid">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="aug-cybernetic-eye" onchange="updateAugmentation('cybernetic_eye', this.checked)">
                                        <label for="aug-cybernetic-eye">Olho Cibern√©tico</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="aug-neural-implant" onchange="updateAugmentation('neural_implant', this.checked)">
                                        <label for="aug-neural-implant">Implante Neural</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="aug-subdermal-armor" onchange="updateAugmentation('subdermal_armor', this.checked)">
                                        <label for="aug-subdermal-armor">Armadura Subd√©rmica</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="aug-enhanced-reflexes" onchange="updateAugmentation('enhanced_reflexes', this.checked)">
                                        <label for="aug-enhanced-reflexes">Reflexos Aprimorados</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="aug-radiation-filter" onchange="updateAugmentation('radiation_filter', this.checked)">
                                        <label for="aug-radiation-filter">Filtro de Radia√ß√£o</label>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 10px;">
                                    <label for="aug-visibility">Visibilidade:</label>
                                    <select id="aug-visibility" onchange="updateAugmentationVisibility(this.value)">
                                        <option value="hidden">Oculta</option>
                                        <option value="subtle">Sutil</option>
                                        <option value="obvious">√ìbvia</option>
                                        <option value="prominent">Proeminente</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Battle Damage -->
                <div class="modification-section">
                    <h4>‚öîÔ∏è Danos de Batalha e Muta√ß√µes</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="character-scars">Cicatrizes:</label>
                            <select id="character-scars" onchange="updateBattleDamage('scars', this.value)">
                                <option value="few">Poucas</option>
                                <option value="none">Nenhuma</option>
                                <option value="moderate">Moderadas</option>
                                <option value="extensive">Extensas</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="radiation-effects">Efeitos de Radia√ß√£o:</label>
                            <select id="radiation-effects" onchange="updateBattleDamage('radiationEffects', this.value)">
                                <option value="none">Nenhum</option>
                                <option value="mild">Leve</option>
                                <option value="moderate">Moderado</option>
                                <option value="severe">Severo</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn" onclick="generateFromAttributes()">üé≤ Gerar das Caracter√≠sticas</button>
                    <button class="btn btn-secondary" onclick="randomizePhysical()">üéØ Aleatorizar F√≠sico</button>
                    <button class="btn" onclick="applyOccupationModifications()">‚öôÔ∏è Aplicar Ocupa√ß√£o</button>
                    <button class="btn btn-danger" onclick="resetPhysicalCharacteristics()">üîÑ Resetar F√≠sico</button>
                </div>
            </div>
        </div>

        <!-- Attributes Tab -->
        <div id="attributes" class="tab-content">
            <div class="info-box">
                <h3>üìä Sistema de Atributos - Call of Cthulhu</h3>
                <p><strong>Valores Base:</strong> Atributos variam de 15 a 90 (3-18 √ó 5)</p>
                <p><strong>Recomenda√ß√£o:</strong> INT e POD de pelo menos 40 para investigadores eficazes</p>
                <p><strong>Importante:</strong> Use valores em m√∫ltiplos de 5 para facilitar os c√°lculos</p>
            </div>

            <div class="section">
                <h2>üé≤ Gera√ß√£o de Atributos</h2>
                
                <div class="attribute-generation">
                    <div class="generation-method" id="rollMethod" onclick="selectGenerationMethod('roll')">
                        <h4>üé≤ M√©todo Padr√£o</h4>
                        <p>3d6 √ó 5 para cada</p>
                        <p style="font-size: 0.9em; color: #888;">Totalmente aleat√≥rio</p>
                    </div>
                    <div class="generation-method" id="rollMethod2" onclick="selectGenerationMethod('roll2')">
                        <h4>üéØ M√©todo Heroico</h4>
                        <p>5√ó (3d6) + 3√ó (2d6+6)</p>
                        <p style="font-size: 0.9em; color: #888;">Distribuir resultados</p>
                    </div>
                    <div class="generation-method active" id="pointMethod" onclick="selectGenerationMethod('points')">
                        <h4>üìä Compra de Pontos</h4>
                        <p>460 pontos totais</p>
                        <p style="font-size: 0.9em; color: #888;">Balanceado e estrat√©gico</p>
                    </div>
                </div>

                <div id="rollDiceSection" style="display: none;">
                    <button class="btn" onclick="rollAllAttributes()">üé≤ Rolar Todos os Atributos</button>
                    <div id="diceResults"></div>
                </div>

                <div id="rollHeroicSection" style="display: none;">
                    <button class="btn" onclick="rollHeroicAttributes()">üé≤ Rolar M√©todo Heroico</button>
                    <div id="heroicResults"></div>
                    <div class="method-description">
                        <p>Este m√©todo gera 8 valores: 5 usando 3d6 e 3 usando 2d6+6 (valores mais altos).</p>
                        <p>Voc√™ pode ent√£o distribuir estes valores como desejar entre os atributos.</p>
                    </div>
                </div>

                <div id="pointsSection">
                    <div class="points-display">
                        <div>üìä Pontos Totais: <span id="totalPoints">400</span>/460</div>
                        <div>‚öîÔ∏è Pontos Restantes: <span id="remainingPoints">60</span></div>
                    </div>
                    <div class="method-description">
                        <p>Distribua 460 pontos entre os 8 atributos. Cada atributo deve estar entre 15 e 90.</p>
                        <p>Recomenda-se INT e POD de pelo menos 40 para um investigador eficaz.</p>
                    </div>
                </div>

                <div class="attributes-grid">
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>For√ßa (FOR/STR)</span>
                            <small>Poder f√≠sico bruto</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="str-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('str', -5)" id="str-minus">-</button>
                            <span id="str-value">50</span>
                            <button onclick="modifyAttribute('str', 5)" id="str-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Constitui√ß√£o (CON)</span>
                            <small>Resist√™ncia e sa√∫de</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="con-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('con', -5)" id="con-minus">-</button>
                            <span id="con-value">50</span>
                            <button onclick="modifyAttribute('con', 5)" id="con-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Tamanho (TAM/SIZ)</span>
                            <small>Porte f√≠sico</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="siz-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('siz', -5)" id="siz-minus">-</button>
                            <span id="siz-value">50</span>
                            <button onclick="modifyAttribute('siz', 5)" id="siz-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Destreza (DES/DEX)</span>
                            <small>Agilidade e reflexos</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="dex-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('dex', -5)" id="dex-minus">-</button>
                            <span id="dex-value">50</span>
                            <button onclick="modifyAttribute('dex', 5)" id="dex-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Apar√™ncia (APA/APP)</span>
                            <small>Carisma e presen√ßa</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="app-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('app', -5)" id="app-minus">-</button>
                            <span id="app-value">50</span>
                            <button onclick="modifyAttribute('app', 5)" id="app-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Intelig√™ncia (INT)</span>
                            <small>Racioc√≠nio e aprendizado</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="int-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('int', -5)" id="int-minus">-</button>
                            <span id="int-value">50</span>
                            <button onclick="modifyAttribute('int', 5)" id="int-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Poder (POD/POW)</span>
                            <small>For√ßa de vontade</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="pow-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('pow', -5)" id="pow-minus">-</button>
                            <span id="pow-value">50</span>
                            <button onclick="modifyAttribute('pow', 5)" id="pow-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="attribute-item">
                        <div class="attribute-name">
                            <span>Educa√ß√£o (EDU)</span>
                            <small>Conhecimento formal</small>
                        </div>
                        <div class="attribute-half-value">Metade: <span id="edu-half">25</span></div>
                        <div class="attribute-value">
                            <button onclick="modifyAttribute('edu', -5)" id="edu-minus">-</button>
                            <span id="edu-value">50</span>
                            <button onclick="modifyAttribute('edu', 5)" id="edu-plus">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Skills Tab -->
        <div id="skills" class="tab-content">
            <div class="info-box">
                <h3>üìö Sistema de Per√≠cias - Call of Cthulhu</h3>
                <p><strong>Per√≠cias Ocupacionais:</strong> EDU √ó 4 pontos (representa treinamento profissional)</p>
                <p><strong>Per√≠cias de Interesse Pessoal:</strong> INT √ó 2 pontos (hobbies e talentos naturais)</p>
                <p>Distribua seus pontos com sabedoria - cada per√≠cia tem um valor base que representa conhecimento comum.</p>
            </div>

            <div class="section">
                <h2>üéØ Per√≠cias Ocupacionais</h2>
                <div class="points-display">
                    <div>üìò Pontos Ocupacionais: <span id="occupationalPoints">200</span></div>
                    <div>üí° Pontos Usados: <span id="usedOccupationalPoints">0</span></div>
                </div>
                
                <div class="skills-grid" id="occupationalSkillsGrid">
                    <!-- Preenchido dinamicamente -->
                </div>
            </div>

            <div class="section">
                <h2>üåü Per√≠cias de Interesse Pessoal</h2>
                <div class="points-display">
                    <div>üéØ Pontos Pessoais: <span id="personalPoints">100</span></div>
                    <div>‚ö° Pontos Usados: <span id="usedPersonalPoints">0</span></div>
                </div>
                
                <div class="skills-grid" id="personalSkillsGrid">
                    <!-- Preenchido dinamicamente -->
                </div>
            </div>
        </div>

        <!-- ComfyUI Tab -->
        <div id="comfyui" class="tab-content">
            <div class="section">
                <h3>üé® Gera√ß√£o de Imagem com ComfyUI</h3>
                <p>Conecte com seu ComfyUI local para gerar automaticamente a imagem do personagem baseada nos dados detalhados da ficha.</p>
                
                <div class="form-group">
                    <label for="comfyuiUrl">URL do ComfyUI:</label>
                    <input type="text" id="comfyuiUrl" value="http://localhost:8188" placeholder="http://localhost:8188">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="imageStyle">Estilo da Imagem:</label>
                        <select id="imageStyle" onchange="updatePromptPreview()">
                            <option value="realistic">Realista</option>
                            <option value="post_apocalyptic">P√≥s-Apocal√≠ptico</option>
                            <option value="cyberpunk">Cyberpunk</option>
                            <option value="wasteland">Terra Devastada</option>
                            <option value="survivor">Sobrevivente</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="imageQuality">Qualidade:</label>
                        <select id="imageQuality" onchange="updatePromptPreview()">
                            <option value="draft">Rascunho (512x512)</option>
                            <option value="standard" selected>Padr√£o (768x768)</option>
                            <option value="high">Alta (1024x1024)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <button class="btn" onclick="testConnection()">üîó Testar Conex√£o</button>
                    <button class="btn btn-secondary" onclick="generateCharacterImage()">üé® Gerar Imagem</button>
                    <button class="btn" onclick="generateCharacterVariations()">üé≠ Gerar Varia√ß√µes</button>
                </div>
                
                <!-- Enhanced Prompt Preview -->
                <div class="prompt-preview">
                    <h3>üéØ Preview do Prompt Aprimorado</h3>
                    <div id="promptPreview">
                        O prompt ser√° gerado automaticamente baseado nos dados detalhados do personagem...
                    </div>
                </div>
            </div>
        </div>

        <!-- Character Sheet Tab -->
        <div id="sheet" class="tab-content">
            <div class="character-sheet">
                <h2>üìú Ficha do Investigador</h2>
                
                <div class="sheet-section">
                    <h3>üë§ Identifica√ß√£o</h3>
                    <div class="sheet-header">
                        <div class="sheet-image" id="sheetImage">
                            <div class="no-image">üë§</div>
                        </div>
                        <div class="sheet-info" id="sheetBasicInfo"></div>
                    </div>
                </div>
                
                <div class="sheet-section">
                    <h3>üß¨ Caracter√≠sticas F√≠sicas Detalhadas</h3>
                    <div id="sheetPhysicalCharacteristics"></div>
                </div>
                
                <div class="sheet-section">
                    <h3>üìä Atributos</h3>
                    <div id="sheetAttributes"></div>
                </div>

                <div class="sheet-section">
                    <h3>üí´ Caracter√≠sticas Derivadas</h3>
                    <div class="derived-stats">
                        <div class="stat-item">
                            <div class="stat-name">Pontos de Vida</div>
                            <div class="stat-value" id="hitPoints">10</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">Sanidade Inicial</div>
                            <div class="stat-value" id="sanity">50</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">Pontos de Magia</div>
                            <div class="stat-value" id="magicPoints">10</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">B√¥nus de Dano</div>
                            <div class="stat-value" id="damageBonus">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">Movimento</div>
                            <div class="stat-value" id="movement">8</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-name">Esquiva</div>
                            <div class="stat-value" id="dodge">25</div>
                        </div>
                    </div>
                </div>
                
                <div class="sheet-section">
                    <h3>üéØ Per√≠cias</h3>
                    <div id="sheetSkills"></div>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn" onclick="exportCharacter()">üíæ Exportar Ficha</button>
                    <button class="btn btn-secondary" onclick="printCharacter()">üñ®Ô∏è Imprimir</button>
                    <button class="btn" onclick="showCharacterValidation()">‚úÖ Validar</button>
                    <button class="btn btn-danger" onclick="resetCharacter()">üîÑ Resetar Tudo</button>
                </div>
            </div>
        </div>
    </div>

<!-- Load main.js FIRST -->
<script src="js/main.js"></script>

<!-- Then load data files -->
<script src="data/occupations.js"></script>
<script src="data/skills.js"></script>
<script src="data/character-data.js"></script>
<script src="data/attributes.js"></script>

<!-- Then load feature modules -->
<script src="js/skills-management.js"></script>
<script src="js/dice-rolling.js"></script>
<script src="js/character-sheet.js"></script>
   
</body>
</html>